import{u as h}from"./habit-DAdz6aC_.js";import{u as v,O as C,q as w,v as T,d as H,c as k,j as l,g as i,e as r,t as c,h as B,k as S,o as d}from"./index-DS11LCJM.js";function E(){const e=h(),u=v(),{completedToday:o}=C(e),{formattedTimes:m}=w(),g=T();function s(t){var b;if(!t.prayerTimeKey)return{eligible:!0};const a=(b=m.value)==null?void 0:b[t.prayerTimeKey];return a?g.value.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})>=a?{eligible:!0}:{eligible:!1,message:`Belum waktunya sholat ${t.name.replace("Sholat ","")}`}:{eligible:!0}}function p(t){const a=e.habits.find(x=>x.id===t);if(a){const{eligible:x,message:f}=s(a);if(!x)return{success:!1,message:f,xpEarned:0,isCompleted:!1}}const{xpEarned:n,wasCompleted:b}=e.toggleHabit(t);return n!==0&&u.addXP(n),{success:!0,xpEarned:n,isCompleted:b}}function y(t){return e.isCompleted(t)}return{toggleHabit:p,isHabitCompleted:y,completedToday:o,checkHabitEligibility:s}}const N={class:"flex items-center gap-4 relative z-10"},j={key:0},P={key:1},V={key:2,class:"text-white text-2xl"},z={class:"flex-1"},D={key:0,class:"text-xs font-normal text-stone-400 ml-1"},K={class:"flex items-center gap-2 mt-1"},R={class:"text-xs font-bold text-amber-500 bg-amber-50 px-2 py-0.5 rounded-full border border-amber-100"},A=H({__name:"HabitItem",props:{habit:{},isCompleted:{type:Boolean}},emits:["toggle"],setup(e,{emit:u}){const o=e,{checkHabitEligibility:m}=E(),g=u,s=k(()=>m(o.habit)),p=k(()=>{switch(o.habit.category){case"spiritual":return"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 border-primary-200 dark:border-primary-800";case"community":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 border-blue-200 dark:border-blue-800";case"personal":return"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800";default:return"bg-stone-100 dark:bg-stone-800 text-stone-700 dark:text-stone-300 border-stone-200 dark:border-stone-700"}}),y=k(()=>{if(o.isCompleted)return"bg-primary-500 text-white";if(!s.value.eligible)return"bg-stone-200 dark:bg-stone-800 text-stone-400 dark:text-stone-500";switch(o.habit.category){case"spiritual":return"bg-primary-200 dark:bg-primary-800 dark:text-primary-100";case"community":return"bg-blue-200 dark:bg-blue-800 dark:text-blue-100";case"personal":return"bg-amber-200 dark:bg-amber-800 dark:text-amber-100";default:return"bg-stone-200 dark:bg-stone-800 dark:text-stone-300"}});function t(a){g("toggle",o.habit.id,a)}return(a,n)=>(d(),l("div",{class:i(["relative group rounded-xl p-3 border-2 transition-all duration-300 cursor-pointer overflow-hidden",[e.isCompleted?"bg-primary-50 dark:bg-primary-900/10 border-primary-200 dark:border-primary-800 shadow-inner opacity-70":s.value.eligible?"bg-white dark:bg-stone-900 border-b-4 border-stone-200 dark:border-stone-800 hover:border-primary-300 dark:hover:border-primary-700 hover:-translate-y-0.5 shadow-sm":"bg-stone-100 dark:bg-stone-900/50 border-stone-200 dark:border-stone-800 opacity-60 grayscale cursor-not-allowed"]]),onClick:t},[r("div",N,[r("div",{class:i(["w-12 h-12 rounded-full flex items-center justify-center text-xl transition-all duration-500",y.value])},[!s.value.eligible&&!e.isCompleted?(d(),l("span",j,"ðŸ”’")):e.isCompleted?(d(),l("span",V,"âœ“")):(d(),l("span",P,c(e.habit.icon),1))],2),r("div",z,[r("h3",{class:i(["font-bold text-stone-800 dark:text-stone-100",{"line-through text-stone-500 dark:text-stone-500":e.isCompleted}])},[B(c(e.habit.name)+" ",1),!s.value.eligible&&!e.isCompleted?(d(),l("span",D,"(Belum Waktunya)")):S("",!0)],2),r("div",K,[r("span",{class:i(["text-xs px-2 py-0.5 rounded-full font-medium",p.value])},c(e.habit.category),3),r("span",R," +"+c(e.habit.xpReward)+" XP ",1)])]),r("div",{class:i(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors duration-300",e.isCompleted?"bg-primary-500 border-primary-500":"border-stone-300 dark:border-stone-600"])},[r("div",{class:i(["w-2.5 h-2.5 bg-white rounded-full transition-transform duration-300",e.isCompleted?"scale-100":"scale-0"])},null,2)],2)])],2))}});export{A as _,E as u};
