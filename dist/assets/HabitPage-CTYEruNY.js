import{u as V,J as E,d as v,c as h,a as c,g as b,e,t as d,o,i as $,k as S,j as P,F as A,x as j,A as B,K as F,_ as X,C as G,L as J,r as x,M as K,N as M,f,n as T,T as R}from"./index-DZwyNBAC.js";import{u as z}from"./habit-DH62z9Rh.js";function Y(){const t=z(),r=V(),{completedToday:i}=E(t);function p(a){const{xpEarned:u,wasCompleted:m}=t.toggleHabit(a);return u!==0&&r.addXP(u),{success:!0,xpEarned:u,isCompleted:m}}function n(a){return t.isCompleted(a)}return{toggleHabit:p,isHabitCompleted:n,completedToday:i}}const D={class:"flex items-center gap-4 relative z-10"},O={key:0},q={key:1,class:"text-white text-2xl"},Q={class:"flex-1"},U={class:"flex items-center gap-2 mt-1"},W={class:"text-xs font-bold text-amber-500 bg-amber-50 px-2 py-0.5 rounded-full border border-amber-100"},Z=v({__name:"HabitItem",props:{habit:{},isCompleted:{type:Boolean}},emits:["toggle"],setup(t,{emit:r}){const i=t,p=r,n=h(()=>{switch(i.habit.category){case"spiritual":return"bg-primary-100 text-primary-700 border-primary-200";case"community":return"bg-blue-100 text-blue-700 border-blue-200";case"personal":return"bg-amber-100 text-amber-700 border-amber-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}}),a=h(()=>{if(i.isCompleted)return"bg-primary-500 text-white";switch(i.habit.category){case"spiritual":return"bg-primary-200";case"community":return"bg-blue-200";case"personal":return"bg-amber-200";default:return"bg-gray-200"}});function u(m){p("toggle",i.habit.id,m)}return(m,y)=>(o(),c("div",{class:b(["relative group rounded-xl p-3 border-2 transition-all duration-300 cursor-pointer overflow-hidden",[t.isCompleted?"bg-primary-50 border-primary-200 shadow-inner opacity-70":"bg-white border-b-4 border-stone-200 hover:border-primary-300 hover:-translate-y-0.5 shadow-sm"]]),onClick:u},[e("div",D,[e("div",{class:b(["w-12 h-12 rounded-full flex items-center justify-center text-xl transition-all duration-500",a.value])},[t.isCompleted?(o(),c("span",q,"âœ“")):(o(),c("span",O,d(t.habit.icon),1))],2),e("div",Q,[e("h3",{class:b(["font-bold text-stone-800",{"line-through text-stone-500":t.isCompleted}])},d(t.habit.name),3),e("div",U,[e("span",{class:b(["text-xs px-2 py-0.5 rounded-full font-medium",n.value])},d(t.habit.category),3),e("span",W," +"+d(t.habit.xpReward)+" XP ",1)])]),e("div",{class:b(["w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors duration-300",t.isCompleted?"bg-primary-500 border-primary-500":"border-stone-300"])},[e("div",{class:b(["w-2.5 h-2.5 bg-white rounded-full transition-transform duration-300",t.isCompleted?"scale-100":"scale-0"])},null,2)],2)])],2))}}),ee={class:"space-y-3 pb-20"},te={key:0,class:"text-center py-10 text-stone-400"},se=v({__name:"HabitList",props:{habits:{}},emits:["toggle"],setup(t,{emit:r}){const i=r;return(p,n)=>(o(),c("div",ee,[$(F,{name:"list",tag:"div",class:"space-y-3"},{default:P(()=>[(o(!0),c(A,null,j(t.habits,a=>(o(),B(Z,{key:a.id,habit:a,"is-completed":a.isCompleted,onToggle:n[0]||(n[0]=(u,m)=>i("toggle",u,m))},null,8,["habit","is-completed"]))),128))]),_:1}),t.habits.length===0?(o(),c("div",te,[...n[1]||(n[1]=[e("p",{class:"text-lg"},"Tidak ada target untuk kategori ini.",-1)])])):S("",!0)]))}}),ae=X(se,[["__scopeId","data-v-8a40c6d3"]]),oe={class:"px-4 pt-6 pb-24 max-w-md mx-auto min-h-screen bg-stone-50 dark:bg-secondary-950 transition-colors duration-200"},re={class:"mb-6"},ne={class:"mt-4 bg-gradient-to-r from-primary-600 to-primary-500 rounded-2xl p-4 text-white shadow-lg relative overflow-hidden"},ie={class:"relative z-10 flex justify-between items-end mb-2"},le={class:"text-3xl font-bold font-mono"},de={class:"text-primary-100 text-sm"},ce={class:"h-2 bg-primary-900/30 rounded-full overflow-hidden"},ue={class:"sticky top-0 z-20 bg-stone-50/95 dark:bg-secondary-950/95 backdrop-blur-sm py-2 -mx-4 px-4 border-b border-stone-200/50 dark:border-secondary-800 mb-4 overflow-x-auto no-scrollbar scroll-smooth"},me={class:"flex gap-2"},be=["onClick"],pe={key:1,class:"flex flex-col items-center justify-center py-12 px-4 text-center space-y-4"},ge=v({__name:"HabitPage",setup(t){const r=z(),{toggleHabit:i}=Y(),{playSfx:p}=G(),{trigger:n}=J(),a=x("all"),u=[{id:"all",label:"Semua",icon:"ðŸ“‹"},{id:"spiritual",label:"Ibadah",icon:"ðŸ•Œ"},{id:"community",label:"Sosial",icon:"ðŸ¤²"},{id:"personal",label:"Pribadi",icon:"ðŸ‘¤"}],m=h(()=>a.value==="all"?r.todaysHabits:r.todaysHabits.filter(g=>g.category===a.value)),y=x(!1),k=x(0),w=x(0),_=x(0),C=x(0);function I(g,s){const l=i(g);l.isCompleted?(L(l.xpEarned,s.clientX,s.clientY),p("success"),n("medium")):n("light")}function L(g,s,l){k.value=g,w.value=s,_.value=l,C.value++,y.value=!0,setTimeout(()=>{y.value=!1},1e3)}const N=h(()=>r.progressPercentage),H=K(N,{duration:800,easing:M.easeOutCubic});return(g,s)=>(o(),c("div",oe,[e("header",re,[s[2]||(s[2]=e("h1",{class:"text-2xl font-bold text-primary-800 dark:text-primary-400"},"Target Harian",-1)),s[3]||(s[3]=e("p",{class:"text-stone-500 dark:text-stone-400 text-sm"},"Jaga semangat ibadahmu!",-1)),e("div",ne,[s[1]||(s[1]=e("div",{class:"absolute right-0 top-0 opacity-10 text-8xl transform translate-x-4 -translate-y-4"}," ðŸŒ™ ",-1)),e("div",ie,[e("div",null,[s[0]||(s[0]=e("div",{class:"text-primary-100 text-sm font-medium"},"Progress Hari Ini",-1)),e("div",le,d(Math.round(f(H)))+"%",1)]),e("div",de,d(f(r).completedCount)+" / "+d(f(r).totalCount)+" Selesai ",1)]),e("div",ce,[e("div",{class:"h-full bg-yellow-400 rounded-full transition-all duration-500 ease-out shadow-[0_0_10px_rgba(250,204,21,0.5)]",style:T({width:`${f(H)}%`})},null,4)])])]),e("div",ue,[e("div",me,[(o(),c(A,null,j(u,l=>e("button",{key:l.id,onClick:xe=>a.value=l.id,class:b(["flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap",a.value===l.id?"bg-primary-600 text-white shadow-md shadow-primary-200 dark:shadow-none":"bg-white dark:bg-secondary-900 text-stone-600 dark:text-stone-400 border border-stone-200 dark:border-secondary-800 hover:bg-stone-50 dark:hover:bg-secondary-800"])},[e("span",null,d(l.icon),1),e("span",null,d(l.label),1)],10,be)),64))])]),m.value.length>0?(o(),B(ae,{key:0,habits:m.value,onToggle:I},null,8,["habits"])):(o(),c("div",pe,[...s[4]||(s[4]=[e("div",{class:"w-24 h-24 bg-stone-100 dark:bg-secondary-800 rounded-full flex items-center justify-center text-4xl mb-2"}," ðŸƒ ",-1),e("div",null,[e("h3",{class:"text-lg font-bold text-stone-700 dark:text-stone-200"},"Tidak ada target"),e("p",{class:"text-sm text-stone-500 dark:text-stone-400 max-w-xs mx-auto"}," Belum ada target untuk kategori ini. Coba pilih kategori lain atau istirahat sejenak. ")],-1)])])),$(R,{"enter-active-class":"transition-all duration-700 ease-out","enter-from-class":"opacity-0 translate-y-4 scale-50","enter-to-class":"opacity-100 -translate-y-12 scale-100","leave-active-class":"transition-all duration-300 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0 -translate-y-20"},{default:P(()=>[y.value?(o(),c("div",{key:C.value,class:"fixed z-50 pointer-events-none font-bold text-amber-500 text-xl drop-shadow-md flex items-center gap-1",style:T({left:`${w.value}px`,top:`${_.value-20}px`})},[e("span",null,"+"+d(k.value)+" XP",1),s[5]||(s[5]=e("span",{class:"animate-bounce"},"âœ¨",-1))],4)):S("",!0)]),_:1})]))}}),he=X(ge,[["__scopeId","data-v-60cdd48b"]]);export{he as default};
