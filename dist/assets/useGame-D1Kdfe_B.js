import{u as E,X as s}from"./game-CiPsQg8L.js";import{l as D,m as S,c as l}from"./index-DrTH09fo.js";const R=[{id:"fajr",name:"Sholat Subuh",category:"spiritual",icon:"ðŸ•Œ",xpReward:15},{id:"dhuhr",name:"Sholat Dzuhur",category:"spiritual",icon:"ðŸ•Œ",xpReward:10},{id:"asr",name:"Sholat Ashar",category:"spiritual",icon:"ðŸ•Œ",xpReward:10},{id:"maghrib",name:"Sholat Maghrib",category:"spiritual",icon:"ðŸ•Œ",xpReward:10},{id:"isha",name:"Sholat Isya",category:"spiritual",icon:"ðŸ•Œ",xpReward:10},{id:"quran",name:"Baca Quran 5 Halaman",category:"spiritual",icon:"ðŸ“–",xpReward:20},{id:"adhkar",name:"Dzikir Pagi",category:"spiritual",icon:"ðŸ¤²",xpReward:10},{id:"sadaqah",name:"Sedekah Hari Ini",category:"community",icon:"ðŸ’",xpReward:25},{id:"tarawih",name:"Sholat Tarawih",category:"spiritual",icon:"ðŸŒ™",xpReward:20}],y="ramadan-quest-habits";function x(){const e=localStorage.getItem(y);if(e)try{return JSON.parse(e)}catch{return{completedToday:[],lastResetDate:""}}return{completedToday:[],lastResetDate:""}}const v=D("habit",()=>{const e=S(R),c=x(),r=S(new Set(c.completedToday)),d=S(c.lastResetDate),p=l(()=>r.value.size),g=l(()=>e.value.length),f=l(()=>Math.round(p.value/g.value*100)),h=l(()=>e.value.map(t=>({...t,isCompleted:r.value.has(t.id)})));function m(){const t={completedToday:Array.from(r.value),lastResetDate:d.value};localStorage.setItem(y,JSON.stringify(t))}function a(t){const u=e.value.find(w=>w.id===t);return u?r.value.has(t)?(r.value.delete(t),m(),{xpEarned:-u.xpReward,wasCompleted:!1}):(r.value.add(t),m(),{xpEarned:u.xpReward,wasCompleted:!0}):{xpEarned:0,wasCompleted:!1}}function n(t){return r.value.has(t)}function o(){const t=new Date().toISOString().split("T")[0];return d.value!==t?(r.value.clear(),d.value=t,m(),!0):!1}function i(){r.value.clear(),d.value="",m()}return o(),{habits:e,completedToday:r,completedCount:p,totalCount:g,progressPercentage:f,todaysHabits:h,toggleHabit:a,isCompleted:n,checkDailyReset:o,reset:i}});function b(){const e=E(),c=v(),r=l(()=>{const{energy:a}=e.state;return a<20?"Lemah sekali... butuh istirahat":a<40?"Agak lelah, tapi masih semangat!":a<60?"Cukup berenergi":a<80?"Berenergi tinggi!":"Penuh semangat! ðŸ’ª"}),d=l(()=>c.progressPercentage),p=l(()=>{const a=new Date,n=a.getHours();if(n>=4&&n<18){const o=new Date(a);o.setHours(18,0,0,0);const i=o.getTime()-a.getTime(),t=Math.floor(i/(1e3*60*60)),u=Math.floor(i%(1e3*60*60)/(1e3*60));return{label:"buka puasa",hours:t,minutes:u,isFasting:!0}}else{const o=new Date(a);n>=18&&o.setDate(o.getDate()+1),o.setHours(4,0,0,0);const i=o.getTime()-a.getTime(),t=Math.floor(i/(1e3*60*60)),u=Math.floor(i%(1e3*60*60)/(1e3*60));return{label:"imsak",hours:t,minutes:u,isFasting:!1}}});function g(){return e.checkDailyLogin()?(e.addXP(s.DAILY_LOGIN),e.state.streak>1&&e.addXP(s.STREAK_BONUS),{xpEarned:s.DAILY_LOGIN+(e.state.streak>1?s.STREAK_BONUS:0),streak:e.state.streak}):null}function f(a){const n=c.toggleHabit(a);return n.wasCompleted?(e.addXP(n.xpEarned),e.addEnergy(5)):e.addXP(n.xpEarned),n}function h(){return e.addXP(s.COOK_RECIPE),e.addEnergy(15),{xpEarned:s.COOK_RECIPE,energyGained:15}}function m(){return e.addXP(s.SAVE_BUDGET),e.addCoins(10),{xpEarned:s.SAVE_BUDGET,coinsEarned:10}}return{gameStore:e,habitStore:c,characterStatus:r,faithMeter:d,timeUntilNextMeal:p,claimDailyBonus:g,completeHabit:f,completeCooking:h,completeSaving:m}}export{b as a,v as u};
