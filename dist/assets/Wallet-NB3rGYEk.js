import{P as L,r as w,c as k,u as O,D as N,d as D,j as c,e as t,k as h,t as b,F as E,A as F,g as j,o as d,a as H,f as o,b as v,i as y,T,B as M,_ as R,I as U,J as G,h as P}from"./index-DS11LCJM.js";import{_ as J}from"./BaseProgress.vue_vue_type_script_setup_true_lang-Bk6vzb1n.js";const W=[{id:"food",category:"Makanan & Minuman",icon:"ðŸ½ï¸"},{id:"transport",category:"Transportasi",icon:"ðŸš—"},{id:"gift",category:"Hadiah / Bingkisan",icon:"ðŸŽ"},{id:"clothes",category:"Pakaian",icon:"ðŸ‘”"},{id:"donation",category:"Sedekah / Zakat",icon:"ðŸ¤²"},{id:"savings",category:"Tabungan",icon:"ðŸ’°"}],K="ramadan-quest-wallet";function A(){return W.map(n=>({...n,amount:0,isCompleted:!1}))}function q(){const n=localStorage.getItem(K);if(n)try{return JSON.parse(n)}catch{return{totalBudget:0,allocations:A()}}return{totalBudget:0,allocations:A()}}const V=L("wallet",()=>{const n=q(),a=w(n.totalBudget),i=w(n.allocations),u=k(()=>i.value.reduce((g,x)=>g+x.amount,0)),m=k(()=>a.value-u.value),r=k(()=>a.value>0?Math.round(u.value/a.value*100):0);function l(){const g={totalBudget:a.value,allocations:i.value};localStorage.setItem(K,JSON.stringify(g))}function f(g){a.value=g,l()}function e(g,x){const _=i.value.find(B=>B.id===g);_&&(_.amount=x,l())}function s(g){const x=i.value.find(_=>_.id===g);x&&(x.isCompleted=!x.isCompleted,l())}function p(g){const x=[1e5,5e4,2e4,1e4,5e3,2e3,1e3,500,200,100],_={1e5:"Rp 100.000",5e4:"Rp 50.000",2e4:"Rp 20.000",1e4:"Rp 10.000",5e3:"Rp 5.000",2e3:"Rp 2.000",1e3:"Rp 1.000",500:"Rp 500",200:"Rp 200",100:"Rp 100"},B=[];let I=g;for(const S of x){const C=Math.floor(I/S);C>0&&(B.push({value:S,count:C,label:_[S]}),I-=C*S)}return B}function $(){a.value=0,i.value=A(),l()}return{totalBudget:a,allocations:i,totalAllocated:u,remainingBudget:m,allocationProgress:r,setTotalBudget:f,updateAllocation:e,toggleCompleted:s,getDenominations:p,reset:$}});function z(){const n=V(),a=O();function i(e){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function u(e){return{food:Math.round(e*.3),transport:Math.round(e*.1),gift:Math.round(e*.2),clothes:Math.round(e*.15),donation:Math.round(e*.1),savings:Math.round(e*.15)}}function m(e){const s=u(e);n.setTotalBudget(e),Object.entries(s).forEach(([p,$])=>{n.updateAllocation(p,$)})}function r(){const e=n.remainingBudget;if(e<=0)return 0;const s=n.allocations.find(p=>p.id==="savings");if(s){n.updateAllocation("savings",s.amount+e);const p=Math.floor(e/1e4);return p>0?(a.addCoins(p),N.success(`Tabungan berhasil! +${p} Koin`,{description:"Alhamdulillah, tabunganmu bertambah!"})):N.success("Tabungan berhasil disimpan!"),p}return 0}const l=k(()=>n.getDenominations(n.remainingBudget)),f=k(()=>{const e=n.allocationProgress;return e<50?{status:"low",label:"Baru mulai",color:"text-secondary-500"}:e<80?{status:"mid",label:"Hampir selesai",color:"text-accent-500"}:e<100?{status:"high",label:"Hampir penuh",color:"text-primary-500"}:{status:"full",label:"Selesai!",color:"text-primary-600"}});return{walletStore:n,formatCurrency:i,getSuggestedAllocations:u,applySuggested:m,commitSavings:r,denominationBreakdown:l,budgetHealth:f}}const Y={class:"space-y-4"},Z={class:"flex items-center justify-between p-4 bg-stone-50 rounded-xl border border-stone-200"},Q={class:"text-xl font-bold text-secondary-900"},X={class:"grid grid-cols-2 gap-3"},ee={class:"flex flex-col"},te={class:"font-bold"},se={class:"flex items-center gap-1 bg-white/50 px-2 py-1 rounded-md"},ae={class:"text-lg font-bold"},oe={key:0,class:"text-center py-8 text-secondary-400"},ne=D({__name:"MoneyBreaker",props:{amount:{}},setup(n){const a=n,i=V(),u=k(()=>i.getDenominations(a.amount));function m(r){switch(r){case 1e5:return"bg-red-100 text-red-700 border-red-200";case 5e4:return"bg-blue-100 text-blue-700 border-blue-200";case 2e4:return"bg-emerald-100 text-emerald-700 border-emerald-200";case 1e4:return"bg-purple-100 text-purple-700 border-purple-200";case 5e3:return"bg-amber-100 text-amber-700 border-amber-200";case 2e3:return"bg-stone-200 text-stone-700 border-stone-300";case 1e3:return"bg-yellow-100 text-yellow-700 border-yellow-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}}return(r,l)=>(d(),c("div",Y,[t("div",Z,[l[0]||(l[0]=t("span",{class:"text-secondary-600 font-medium"},"Total Nominal",-1)),t("span",Q,b(new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(n.amount)),1)]),t("div",X,[(d(!0),c(E,null,F(u.value,f=>(d(),c("div",{key:f.value,class:j(["flex items-center justify-between p-3 rounded-lg border",m(f.value)])},[t("div",ee,[l[1]||(l[1]=t("span",{class:"text-xs opacity-70 font-semibold uppercase tracking-wider"},"Pecahan",-1)),t("span",te,b(f.label),1)]),t("div",se,[t("span",ae,b(f.count),1),l[2]||(l[2]=t("span",{class:"text-xs"},"lembar",-1))])],2))),128))]),u.value.length===0?(d(),c("div",oe,[...l[3]||(l[3]=[t("p",null,"Belum ada nominal untuk dihitung.",-1)])])):h("",!0)]))}}),le={key:0,class:"absolute inset-0 z-20 bg-primary-600/90 backdrop-blur-sm flex flex-col items-center justify-center text-white p-4 text-center"},re={class:"text-4xl mb-2"},ie={class:"flex items-center justify-between mb-3"},ue={class:"flex justify-between mt-3 text-sm"},de={class:"font-semibold"},ce={class:"flex justify-between mt-1 text-sm"},me={class:"font-semibold text-primary-600"},fe={key:0,class:"mt-4 pt-4 border-t border-secondary-100"},pe={class:"flex items-center justify-center gap-2"},ge=D({__name:"BudgetSummary",setup(n){const{walletStore:a,formatCurrency:i,budgetHealth:u,commitSavings:m}=z(),r=w(!1),l=w(0);function f(){if(confirm("Simpan semua sisa budget ke Tabungan? Kamu akan dapat Koin! ðŸ’°")){const e=m();e>0&&(l.value=e,r.value=!0,setTimeout(()=>r.value=!1,3e3))}}return(e,s)=>o(a).totalBudget>0?(d(),H(o(R),{key:0,class:"relative overflow-hidden"},{default:v(()=>[y(T,{"enter-active-class":"transition duration-500 ease-out","enter-from-class":"opacity-0 scale-150","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-300 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-50"},{default:v(()=>[r.value?(d(),c("div",le,[t("span",re,"ðŸª™ +"+b(l.value),1),s[0]||(s[0]=t("h3",{class:"font-bold text-lg"},"Tabungan Bertambah!",-1)),s[1]||(s[1]=t("p",{class:"text-sm opacity-90"},"Sisa budget diamankan.",-1))])):h("",!0)]),_:1}),t("div",ie,[s[2]||(s[2]=t("span",{class:"font-semibold text-secondary-900"},"Progress Alokasi",-1)),t("span",{class:j(o(u).color)},b(o(u).label),3)]),y(o(J),{value:o(a).allocationProgress,variant:"primary",size:"lg","show-label":""},null,8,["value"]),t("div",ue,[s[3]||(s[3]=t("span",{class:"text-secondary-500"},"Dialokasikan",-1)),t("span",de,b(o(i)(o(a).totalAllocated)),1)]),t("div",ce,[s[4]||(s[4]=t("span",{class:"text-secondary-500"},"Sisa",-1)),t("span",me,b(o(i)(o(a).remainingBudget)),1)]),o(a).remainingBudget>0?(d(),c("div",fe,[y(o(M),{block:"",variant:"outline",class:"!border-emerald-200 !text-emerald-700 !bg-emerald-50 hover:!bg-emerald-100",onClick:f},{default:v(()=>[t("div",pe,[s[5]||(s[5]=t("span",null,"ðŸ’°",-1)),t("span",null,"Tabung Sisa (+"+b(Math.floor(o(a).remainingBudget/1e4))+" Koin)",1)])]),_:1})])):h("",!0)]),_:1})):h("",!0)}}),be={class:"min-h-screen pb-24 px-4 py-6 space-y-6"},ye={class:"flex gap-2"},xe={key:0,class:"space-y-3 pb-32"},ve={class:"flex items-center gap-3"},he={class:"text-2xl"},_e={class:"font-medium text-secondary-900"},ke={class:"text-sm text-secondary-500"},we=["onClick"],Be={key:1,class:"fixed bottom-20 left-0 w-full px-4 flex justify-center pointer-events-none"},Se={key:0,class:"fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-3xl shadow-2xl max-h-[85vh] flex flex-col"},$e={class:"p-4 border-b border-stone-100 flex items-center justify-between"},Ce={class:"p-4 overflow-y-auto pb-8"},Re=D({__name:"Wallet",setup(n){const{walletStore:a,formatCurrency:i,applySuggested:u}=z(),m=w(a.totalBudget||5e5),r=w(!1);function l(){u(m.value)}return(f,e)=>(d(),c("div",be,[e[11]||(e[11]=t("div",null,[t("h1",{class:"text-2xl font-bold text-secondary-900"},"Dompet ðŸ’°"),t("p",{class:"text-sm text-secondary-500"},"Kelola budget THR kamu")],-1)),y(o(R),null,{default:v(()=>[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-secondary-700 mb-2"}," Total Budget THR ",-1)),t("div",ye,[U(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s),type:"number",class:"flex-1 px-4 py-3 border border-secondary-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"500000"},null,512),[[G,m.value,void 0,{number:!0}]]),y(o(M),{onClick:l},{default:v(()=>[...e[4]||(e[4]=[P(" Set ",-1)])]),_:1})])]),_:1}),y(ge),o(a).totalBudget>0?(d(),c("div",xe,[e[7]||(e[7]=t("h3",{class:"font-semibold text-secondary-900"},"Alokasi Budget",-1)),(d(!0),c(E,null,F(o(a).allocations,s=>(d(),H(o(R),{key:s.id,class:"flex items-center justify-between"},{default:v(()=>[t("div",ve,[t("span",he,b(s.icon),1),t("div",null,[t("p",_e,b(s.category),1),t("p",ke,b(o(i)(s.amount)),1)])]),t("button",{class:j(["w-8 h-8 rounded-full flex items-center justify-center transition-colors",s.isCompleted?"bg-primary-100 text-primary-600":"bg-secondary-100 text-secondary-400"]),onClick:p=>o(a).toggleCompleted(s.id)},[...e[6]||(e[6]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],10,we)]),_:2},1024))),128))])):h("",!0),o(a).totalAllocated>0?(d(),c("div",Be,[y(o(M),{class:"shadow-xl pointer-events-auto flex items-center gap-2 !px-6 !py-3 !rounded-full bg-secondary-900 !text-white",onClick:e[1]||(e[1]=s=>r.value=!0)},{default:v(()=>[...e[8]||(e[8]=[t("span",null,"ðŸ’¸",-1),P(" Hitung Pecahan Uang ",-1)])]),_:1})])):h("",!0),y(T,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0 translate-y-full","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-full"},{default:v(()=>[r.value?(d(),c("div",Se,[t("div",$e,[e[10]||(e[10]=t("h3",{class:"font-bold text-lg text-secondary-900"},"Rincian Pecahan Uang",-1)),t("button",{onClick:e[2]||(e[2]=s=>r.value=!1),class:"p-2 -mr-2 text-stone-400 hover:text-stone-600"},[...e[9]||(e[9]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Ce,[y(ne,{amount:o(a).totalAllocated},null,8,["amount"])])])):h("",!0)]),_:1}),y(T,{"enter-active-class":"transition duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[r.value?(d(),c("div",{key:0,class:"fixed inset-0 bg-black/50 z-40 backdrop-blur-sm",onClick:e[3]||(e[3]=s=>r.value=!1)})):h("",!0)]),_:1})]))}});export{Re as default};
