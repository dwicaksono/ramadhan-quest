import{d as B,u as G,r as h,p as T,R as V,q as $,a as x,e,i as r,t as c,f as a,j as i,P as p,D as _,E as j,H as m,h as y,g,S as F,U as H,F as z,x as K,I as l,o as k}from"./index-cYu-ZcQ1.js";import{_ as X}from"./BaseProgress.vue_vue_type_script_setup_true_lang-396q0L2Q.js";const u={game:"ramadan-quest-game",wallet:"ramadan-quest-wallet",habits:"ramadan-quest-habits"};function Y(){const b={game:JSON.parse(localStorage.getItem(u.game)||"{}"),wallet:JSON.parse(localStorage.getItem(u.wallet)||"{}"),habits:JSON.parse(localStorage.getItem(u.habits)||"{}"),timestamp:new Date().toISOString(),version:"1.0.0"},s=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),n=URL.createObjectURL(s),d=document.createElement("a");d.href=n,d.download=`ramadan-quest-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(n)}async function Q(b){try{const s=await b.text(),n=JSON.parse(s);if(!n.game||!n.wallet||!n.habits)throw new Error("Invalid backup file format");return localStorage.setItem(u.game,JSON.stringify(n.game)),localStorage.setItem(u.wallet,JSON.stringify(n.wallet)),localStorage.setItem(u.habits,JSON.stringify(n.habits)),window.location.reload(),!0}catch(s){return console.error("Import failed:",s),!1}}function W(){localStorage.removeItem(u.game),localStorage.removeItem(u.wallet),localStorage.removeItem(u.habits),window.location.reload()}const Z={class:"min-h-screen pb-24 px-4 py-6 space-y-6"},ee={class:"text-center"},te={class:"text-2xl font-bold text-secondary-900 dark:text-white"},ae={class:"text-sm text-secondary-500 dark:text-secondary-400"},se={class:"space-y-4"},ne={class:"flex justify-between text-sm mb-1"},oe={class:"font-medium dark:text-white"},re={class:"grid grid-cols-3 gap-4 text-center"},ie={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},le={class:"text-2xl font-bold text-accent-600 dark:text-accent-400"},de={class:"text-2xl font-bold text-secondary-600 dark:text-secondary-300"},ce={class:"flex gap-2"},ue={class:"space-y-4"},fe={class:"flex items-center justify-between"},me={class:"flex items-center justify-between"},ge={class:"space-y-4"},xe={class:"flex gap-2 mb-2"},pe={key:0},ye={key:1},ke={class:"text-xs text-secondary-500 dark:text-secondary-400"},be=["value"],ve={class:"flex items-center justify-between pt-2"},he={class:"space-y-6"},we={class:"space-y-3"},Se={class:"grid grid-cols-2 gap-3"},_e={class:"relative"},Ne={class:"pt-4 border-t border-secondary-200 dark:border-secondary-700"},je=B({__name:"Profile",setup(b){const s=G(),n=h(s.state.userName),d=h(null),{locationName:N,detectLocation:D,isLoading:I,availableMethods:L,selectedMethodId:w}=T(),C=V("rq-user-coords",{lat:0,lng:0}),S=h(N.value),v=h(!1);function P(){"Notification"in window&&(v.value=Notification.permission==="granted")}async function O(){if(!("Notification"in window)){l.error("Browser tidak mendukung notifikasi");return}const f=await Notification.requestPermission();v.value=f==="granted",f==="granted"?(l.success("Notifikasi Adzan diaktifkan! ğŸ””"),new Notification("Ramadhan Quest",{body:"Notifikasi aktif. Selamat beribadah!"})):l.error("Izin notifikasi ditolak")}function R(){N.value=S.value,l.success("Nama lokasi diperbarui")}function M(){l.success("Metode perhitungan diperbarui")}function J(){s.setUserName(n.value),l.success("Nama berhasil disimpan!")}$(()=>{P()});function U(){try{Y(),l.success("Backup data berhasil didownload")}catch{l.error("Gagal membuat backup")}}async function q(f){var E;const t=f.target;if(!((E=t.files)!=null&&E.length))return;const o=t.files[0];await Q(o)?l.success("Data berhasil dipulihkan!"):l.error("Gagal memulihkan data. File mungkin rusak."),d.value&&(d.value.value="")}function A(){confirm(`âš ï¸ PERINGATAN: Semua progress kamu (XP, Coins, Habit) akan hilang permanen.

Yakin ingin reset?`)&&W()}return(f,t)=>(k(),x("div",Z,[e("div",ee,[t[5]||(t[5]=e("div",{class:"w-24 h-24 bg-primary-100 dark:bg-primary-900/50 rounded-full mx-auto flex items-center justify-center text-5xl mb-4 border-4 border-white dark:border-secondary-800 shadow-sm"}," ğŸ§• ",-1)),e("h1",te,c(a(s).state.userName||"Muslim"),1),e("p",ae,"Level "+c(a(s).state.level),1)]),r(a(p),null,{default:i(()=>[e("div",se,[e("div",null,[e("div",ne,[t[6]||(t[6]=e("span",{class:"text-secondary-600 dark:text-secondary-400"},"XP",-1)),e("span",oe,c(a(s).state.xp)+" XP",1)]),r(a(X),{value:a(s).currentLevelProgress,variant:"primary"},null,8,["value"])]),e("div",re,[e("div",null,[e("p",ie,c(a(s).state.streak),1),t[7]||(t[7]=e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Streak",-1))]),e("div",null,[e("p",le,c(a(s).state.coins),1),t[8]||(t[8]=e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Coins",-1))]),e("div",null,[e("p",de,c(a(s).state.energy)+"%",1),t[9]||(t[9]=e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Energy",-1))])])])]),_:1}),r(a(p),null,{default:i(()=>[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Nama Kamu ",-1)),e("div",ce,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>n.value=o),type:"text",class:"flex-1 px-4 py-3 border border-secondary-200 dark:border-secondary-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white placeholder-secondary-400 dark:placeholder-secondary-500",placeholder:"Masukkan nama"},null,512),[[j,n.value]]),r(a(m),{onClick:J},{default:i(()=>[...t[10]||(t[10]=[y(" Simpan ",-1)])]),_:1})])]),_:1}),r(a(p),{title:"Pengaturan Aplikasi"},{default:i(()=>[e("div",ue,[e("div",fe,[t[12]||(t[12]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400"}," ğŸ”Š "),e("div",null,[e("p",{class:"text-sm font-medium text-secondary-900 dark:text-white"},"Efek Suara"),e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Audio game dan efek")])],-1)),e("button",{onClick:t[1]||(t[1]=o=>a(s).toggleSound(!a(s).state.settings.soundEnabled)),class:g(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-secondary-800",a(s).state.settings.soundEnabled?"bg-primary-600":"bg-gray-200 dark:bg-secondary-700"])},[e("span",{class:g(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",a(s).state.settings.soundEnabled?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",me,[t[13]||(t[13]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-orange-50 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400"}," ğŸ“³ "),e("div",null,[e("p",{class:"text-sm font-medium text-secondary-900 dark:text-white"},"Getaran"),e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Haptic feedback")])],-1)),e("button",{onClick:t[2]||(t[2]=o=>a(s).toggleHaptics(!a(s).state.settings.hapticsEnabled)),class:g(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-secondary-800",a(s).state.settings.hapticsEnabled?"bg-primary-600":"bg-gray-200 dark:bg-secondary-700"])},[e("span",{class:g(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",a(s).state.settings.hapticsEnabled?"translate-x-6":"translate-x-1"])},null,2)],2)])])]),_:1}),r(a(p),{title:"Waktu Sholat & Notifikasi"},{default:i(()=>[e("div",ge,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Lokasi ",-1)),e("div",xe,[_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>S.value=o),type:"text",class:"flex-1 px-4 py-3 border border-secondary-200 dark:border-secondary-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white",placeholder:"Nama Kota (cth: Jakarta)",onChange:R},null,544),[[j,S.value]]),r(a(m),{onClick:a(D),disabled:a(I)},{default:i(()=>[a(I)?(k(),x("span",pe,"...")):(k(),x("span",ye,"ğŸ“ GPS"))]),_:1},8,["onClick","disabled"])]),e("p",ke," Koordinat: "+c(a(C).lat.toFixed(4))+", "+c(a(C).lng.toFixed(4)),1)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Metode Perhitungan ",-1)),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>H(w)?w.value=o:null),onChange:M,class:"w-full px-4 py-3 border border-secondary-200 dark:border-secondary-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white appearance-none"},[(k(!0),x(z,null,K(a(L),o=>(k(),x("option",{key:o.id,value:o.id},c(o.name),9,be))),128))],544),[[F,a(w)]])]),e("div",ve,[t[16]||(t[16]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-primary-50 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400"}," ğŸ”” "),e("div",null,[e("p",{class:"text-sm font-medium text-secondary-900 dark:text-white"},"Notifikasi Adzan"),e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Pengingat waktu sholat")])],-1)),e("button",{onClick:O,class:g(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-secondary-800",v.value?"bg-primary-600":"bg-gray-200 dark:bg-secondary-700"])},[e("span",{class:g(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",v.value?"translate-x-6":"translate-x-1"])},null,2)],2)])])]),_:1}),e("div",he,[r(a(p),{title:"Pengaturan Data"},{default:i(()=>[e("div",we,[t[19]||(t[19]=e("p",{class:"text-sm text-secondary-500 dark:text-secondary-400 mb-4"}," Simpan progress kamu agar aman, atau pindahkan ke perangkat lain. ",-1)),e("div",Se,[r(a(m),{variant:"outline",onClick:U,class:"dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-700"},{default:i(()=>[...t[17]||(t[17]=[y(" ğŸ“¤ Backup Data ",-1)])]),_:1}),e("div",_e,[e("input",{type:"file",ref_key:"fileInput",ref:d,accept:".json",class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:q},null,544),r(a(m),{variant:"outline",class:"w-full dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-700"},{default:i(()=>[...t[18]||(t[18]=[y(" ğŸ“¥ Restore Data ",-1)])]),_:1})])])])]),_:1}),e("div",Ne,[r(a(m),{variant:"outline",block:"",class:"mb-3 dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-700"},{default:i(()=>[...t[20]||(t[20]=[y(" ğŸ’ Traktir Developer ",-1)])]),_:1}),r(a(m),{variant:"ghost",block:"",class:"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:A},{default:i(()=>[...t[21]||(t[21]=[y(" ğŸ—‘ï¸ Reset Semua Data ",-1)])]),_:1}),t[22]||(t[22]=e("p",{class:"text-center text-xs text-secondary-400 mt-2"}," Hati-hati, aksi ini tidak bisa dibatalkan. ",-1))])])]))}});export{je as default};
