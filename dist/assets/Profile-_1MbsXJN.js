import{u as M,c as f,R as B,S as A,I as x,d as q,q as G,A as ee,j as m,e,h as N,t as i,f as a,a as b,F as J,x as H,g as h,P as L,o as k,r as C,p as te,i as c,D,E as $,H as S,U as ae,V as se}from"./index-DZwyNBAC.js";import{_ as ne}from"./BaseProgress.vue_vue_type_script_setup_true_lang-hGTJA7t_.js";function re(){const p=M(),s=f(()=>p.state.level),r=f(()=>p.state.xp),l=f(()=>B[s.value]||0),g=f(()=>B[s.value+1]||1/0),u=f(()=>Math.max(0,g.value-r.value)),n=f(()=>r.value-l.value),o=f(()=>g.value-l.value),_=f(()=>o.value===1/0?100:Math.min(n.value/o.value*100,100)),I=f(()=>!(s.value+1 in B)),T=f(()=>{const y=s.value;return y>=30?"Wali Tercinta":y>=25?"Mujahid Ramadhan":y>=20?"Sahabat Puasa":y>=15?"Penghafal Doa":y>=10?"Santri Rajin":y>=5?"Pemula Berbinar":"Petualang Baru"});return{level:s,xp:r,currentLevelThreshold:l,nextLevelThreshold:g,xpToNextLevel:u,xpInCurrentLevel:n,xpForCurrentLevelBand:o,progressPercent:_,isMaxLevel:I,levelTitle:T}}const U=[{id:"first_step",name:"Langkah Pertama",description:"Login pertama kali di Ramadhan Quest",icon:"ğŸš€"},{id:"hydration_master",name:"Hydration Master",description:"Minum 8 gelas air dalam satu malam (2-4-2)",icon:"ğŸ’§"},{id:"early_bird",name:"Pejuang Sahur",description:"Log aktivitas pada waktu Sahur (03:00 - 04:30)",icon:"kakbah-icon"},{id:"night_owl",name:"Ahli Ibadah Malam",description:"Log Tarawih atau Tadarus di malam hari",icon:"ğŸŒ™"},{id:"sedekah_warrior",name:"Dermawan",description:"Melakukan Sedekah 5 kali",icon:"ğŸ¤"},{id:"streak_master",name:"Istiqomah",description:"Mencapai 7 hari streak berturut-turut",icon:"ğŸ”¥"}],oe="ramadan-quest-badges";function ie(){const p=M(),s=A(oe,{}),r=f(()=>U.map(n=>({...n,unlockedAt:s.value[n.id]||void 0,isUnlocked:!!s.value[n.id]}))),l=f(()=>Object.keys(s.value).length);function g(){const n=p.state,o=[];return s.value.first_step||(u("first_step"),o.push("first_step")),!s.value.hydration_master&&n.waterLog>=8&&(u("hydration_master"),o.push("hydration_master")),!s.value.sedekah_warrior&&n.sadaqahTotal>=5e4&&(u("sedekah_warrior"),o.push("sedekah_warrior")),!s.value.streak_master&&n.streak>=7&&(u("streak_master"),o.push("streak_master")),o}function u(n){if(s.value[n])return;const o=U.find(_=>_.id===n);o&&(s.value[n]=new Date().toISOString(),x.success(`Badge Unlocked: ${o.name}! ${o.icon}`,{duration:5e3,description:o.description}),p.addXP(100))}return{allBadges:r,unlockedCount:l,checkBadges:g,unlock:u}}const le={class:"mb-4 text-sm text-secondary-500 dark:text-secondary-400"},de={class:"font-bold text-primary-600 dark:text-primary-400"},ce={class:"grid grid-cols-3 gap-3"},ue={class:"text-3xl mb-2 filter drop-shadow-sm"},me={class:"space-y-1"},fe={key:0,class:"text-[10px] text-amber-600 dark:text-amber-400 font-medium"},pe={key:1,class:"text-[10px] text-secondary-400 dark:text-secondary-600"},xe=q({__name:"TrophyRoom",setup(p){const{allBadges:s,checkBadges:r,unlockedCount:l}=ie();return G(()=>{r()}),(g,u)=>(k(),ee(a(L),{title:"Trophy Room ğŸ†"},{default:m(()=>[e("div",le,[u[0]||(u[0]=N(" Koleksi pencapaianmu selama Ramadhan. ",-1)),e("span",de,i(a(l))+" / "+i(a(s).length),1)]),e("div",ce,[(k(!0),b(J,null,H(a(s),n=>(k(),b("div",{key:n.id,class:h(["flex flex-col items-center text-center p-3 rounded-xl border transition-all duration-300",[n.isUnlocked?"bg-amber-50 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800":"bg-stone-50 dark:bg-white/5 border-stone-100 dark:border-white/5 grayscale opacity-60"]])},[e("div",ue,i(n.icon),1),e("div",me,[e("p",{class:h(["text-xs font-bold leading-tight",n.isUnlocked?"text-secondary-900 dark:text-white":"text-secondary-400 dark:text-secondary-500"])},i(n.name),3),n.isUnlocked?(k(),b("p",fe," Tercapai! ")):(k(),b("p",pe," ??? "))])],2))),128))])]),_:1}))}}),v={game:"ramadan-quest-game",wallet:"ramadan-quest-wallet",habits:"ramadan-quest-habits"};function ke(){const p={game:JSON.parse(localStorage.getItem(v.game)||"{}"),wallet:JSON.parse(localStorage.getItem(v.wallet)||"{}"),habits:JSON.parse(localStorage.getItem(v.habits)||"{}"),timestamp:new Date().toISOString(),version:"1.0.0"},s=new Blob([JSON.stringify(p,null,2)],{type:"application/json"}),r=URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download=`ramadan-quest-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)}async function ge(p){try{const s=await p.text(),r=JSON.parse(s);if(!r.game||!r.wallet||!r.habits)throw new Error("Invalid backup file format");return localStorage.setItem(v.game,JSON.stringify(r.game)),localStorage.setItem(v.wallet,JSON.stringify(r.wallet)),localStorage.setItem(v.habits,JSON.stringify(r.habits)),window.location.reload(),!0}catch(s){return console.error("Import failed:",s),!1}}function ye(){localStorage.removeItem(v.game),localStorage.removeItem(v.wallet),localStorage.removeItem(v.habits),window.location.reload()}const be={class:"min-h-screen pb-24 px-4 py-6 space-y-6"},ve={class:"text-center"},he={class:"text-2xl font-bold text-secondary-900 dark:text-white"},_e={class:"text-sm text-primary-600 dark:text-primary-400 font-medium"},we={class:"text-xs text-secondary-500 dark:text-secondary-400"},Se={class:"space-y-4"},Ne={class:"flex justify-between text-sm mb-1"},Le={class:"font-medium dark:text-white"},Ie={class:"text-xs text-secondary-400 dark:text-secondary-500 mt-1 text-right"},Pe={class:"grid grid-cols-3 gap-4 text-center pt-2 border-t border-secondary-100 dark:border-secondary-700"},Ce={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},Te={class:"text-2xl font-bold text-accent-600 dark:text-accent-400"},Ee={class:"text-2xl font-bold text-secondary-600 dark:text-secondary-300"},Re={class:"flex gap-2"},Be={class:"space-y-4"},De={class:"flex items-center justify-between"},Me={class:"flex items-center justify-between"},je={class:"space-y-4"},Oe={class:"flex gap-2 mb-2"},$e={key:0},Ue={key:1},Ae={class:"text-xs text-secondary-500 dark:text-secondary-400"},qe=["value"],Ge={class:"flex items-center justify-between pt-2"},Je={class:"space-y-6"},He={class:"space-y-3"},Ve={class:"grid grid-cols-2 gap-3"},Fe={class:"relative"},Ke={class:"pt-4 border-t border-secondary-200 dark:border-secondary-700"},Qe=q({__name:"Profile",setup(p){const s=M(),{level:r,xp:l,xpToNextLevel:g,progressPercent:u,levelTitle:n}=re(),o=C(s.state.userName),_=C(null),{locationName:I,detectLocation:T,isLoading:y,availableMethods:V,selectedMethodId:E}=te(),j=A("rq-user-coords",{lat:0,lng:0}),R=C(I.value),P=C(!1);function F(){"Notification"in window&&(P.value=Notification.permission==="granted")}async function K(){if(!("Notification"in window)){x.error("Browser tidak mendukung notifikasi");return}const w=await Notification.requestPermission();P.value=w==="granted",w==="granted"?(x.success("Notifikasi Adzan diaktifkan! ğŸ””"),new Notification("Ramadhan Quest",{body:"Notifikasi aktif. Selamat beribadah!"})):x.error("Izin notifikasi ditolak")}function X(){I.value=R.value,x.success("Nama lokasi diperbarui")}function z(){x.success("Metode perhitungan diperbarui")}function Y(){s.setUserName(o.value),x.success("Nama berhasil disimpan!")}G(()=>{F()});function Q(){try{ke(),x.success("Backup data berhasil didownload")}catch{x.error("Gagal membuat backup")}}async function W(w){var O;const t=w.target;if(!((O=t.files)!=null&&O.length))return;const d=t.files[0];await ge(d)?x.success("Data berhasil dipulihkan!"):x.error("Gagal memulihkan data. File mungkin rusak."),_.value&&(_.value.value="")}function Z(){confirm(`âš ï¸ PERINGATAN: Semua progress kamu (XP, Coins, Habit) akan hilang permanen.

Yakin ingin reset?`)&&ye()}return(w,t)=>(k(),b("div",be,[e("div",ve,[t[5]||(t[5]=e("div",{class:"w-24 h-24 bg-primary-100 dark:bg-primary-900/50 rounded-full mx-auto flex items-center justify-center text-5xl mb-4 border-4 border-white dark:border-secondary-800 shadow-sm"}," ğŸ§• ",-1)),e("h1",he,i(a(s).state.userName||"Muslim"),1),e("p",_e,i(a(n)),1),e("p",we,"Level "+i(a(r)),1)]),c(a(L),null,{default:m(()=>[e("div",Se,[e("div",null,[e("div",Ne,[t[6]||(t[6]=e("span",{class:"text-secondary-600 dark:text-secondary-400"},"XP Progress",-1)),e("span",Le,i(a(l))+" / "+i(a(l)+a(g))+" XP",1)]),c(a(ne),{value:a(u),variant:"primary"},null,8,["value"]),e("p",Ie,i(a(g))+" XP to Level "+i(a(r)+1),1)]),e("div",Pe,[e("div",null,[e("p",Ce,i(a(s).state.streak),1),t[7]||(t[7]=e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Streak",-1))]),e("div",null,[e("p",Te,i(a(s).state.coins),1),t[8]||(t[8]=e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Coins",-1))]),e("div",null,[e("p",Ee,i(a(s).state.energy)+"%",1),t[9]||(t[9]=e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Energy",-1))])])])]),_:1}),c(xe),c(a(L),null,{default:m(()=>[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Nama Kamu ",-1)),e("div",Re,[D(e("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.value=d),type:"text",class:"flex-1 px-4 py-3 border border-secondary-200 dark:border-secondary-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white placeholder-secondary-400 dark:placeholder-secondary-500",placeholder:"Masukkan nama"},null,512),[[$,o.value]]),c(a(S),{onClick:Y},{default:m(()=>[...t[10]||(t[10]=[N(" Simpan ",-1)])]),_:1})])]),_:1}),c(a(L),{title:"Pengaturan Aplikasi"},{default:m(()=>[e("div",Be,[e("div",De,[t[12]||(t[12]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400"}," ğŸ”Š "),e("div",null,[e("p",{class:"text-sm font-medium text-secondary-900 dark:text-white"},"Efek Suara"),e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Audio game dan efek")])],-1)),e("button",{onClick:t[1]||(t[1]=d=>a(s).toggleSound(!a(s).state.settings.soundEnabled)),class:h(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-secondary-800",a(s).state.settings.soundEnabled?"bg-primary-600":"bg-gray-200 dark:bg-secondary-700"])},[e("span",{class:h(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",a(s).state.settings.soundEnabled?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",Me,[t[13]||(t[13]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-orange-50 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400"}," ğŸ“³ "),e("div",null,[e("p",{class:"text-sm font-medium text-secondary-900 dark:text-white"},"Getaran"),e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Haptic feedback")])],-1)),e("button",{onClick:t[2]||(t[2]=d=>a(s).toggleHaptics(!a(s).state.settings.hapticsEnabled)),class:h(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-secondary-800",a(s).state.settings.hapticsEnabled?"bg-primary-600":"bg-gray-200 dark:bg-secondary-700"])},[e("span",{class:h(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",a(s).state.settings.hapticsEnabled?"translate-x-6":"translate-x-1"])},null,2)],2)])])]),_:1}),c(a(L),{title:"Waktu Sholat & Notifikasi"},{default:m(()=>[e("div",je,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Lokasi ",-1)),e("div",Oe,[D(e("input",{"onUpdate:modelValue":t[3]||(t[3]=d=>R.value=d),type:"text",class:"flex-1 px-4 py-3 border border-secondary-200 dark:border-secondary-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white",placeholder:"Nama Kota (cth: Jakarta)",onChange:X},null,544),[[$,R.value]]),c(a(S),{onClick:a(T),disabled:a(y)},{default:m(()=>[a(y)?(k(),b("span",$e,"...")):(k(),b("span",Ue,"ğŸ“ GPS"))]),_:1},8,["onClick","disabled"])]),e("p",Ae," Koordinat: "+i(a(j).lat.toFixed(4))+", "+i(a(j).lng.toFixed(4)),1)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Metode Perhitungan ",-1)),D(e("select",{"onUpdate:modelValue":t[4]||(t[4]=d=>se(E)?E.value=d:null),onChange:z,class:"w-full px-4 py-3 border border-secondary-200 dark:border-secondary-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white appearance-none"},[(k(!0),b(J,null,H(a(V),d=>(k(),b("option",{key:d.id,value:d.id},i(d.name),9,qe))),128))],544),[[ae,a(E)]])]),e("div",Ge,[t[16]||(t[16]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-primary-50 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400"}," ğŸ”” "),e("div",null,[e("p",{class:"text-sm font-medium text-secondary-900 dark:text-white"},"Notifikasi Adzan"),e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Pengingat waktu sholat")])],-1)),e("button",{onClick:K,class:h(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-secondary-800",P.value?"bg-primary-600":"bg-gray-200 dark:bg-secondary-700"])},[e("span",{class:h(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",P.value?"translate-x-6":"translate-x-1"])},null,2)],2)])])]),_:1}),e("div",Je,[c(a(L),{title:"Pengaturan Data"},{default:m(()=>[e("div",He,[t[19]||(t[19]=e("p",{class:"text-sm text-secondary-500 dark:text-secondary-400 mb-4"}," Simpan progress kamu agar aman, atau pindahkan ke perangkat lain. ",-1)),e("div",Ve,[c(a(S),{variant:"outline",onClick:Q,class:"dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-700"},{default:m(()=>[...t[17]||(t[17]=[N(" ğŸ“¤ Backup Data ",-1)])]),_:1}),e("div",Fe,[e("input",{type:"file",ref_key:"fileInput",ref:_,accept:".json",class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:W},null,544),c(a(S),{variant:"outline",class:"w-full dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-700"},{default:m(()=>[...t[18]||(t[18]=[N(" ğŸ“¥ Restore Data ",-1)])]),_:1})])])])]),_:1}),e("div",Ke,[c(a(S),{variant:"outline",block:"",class:"mb-3 dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-700"},{default:m(()=>[...t[20]||(t[20]=[N(" ğŸ’ Traktir Developer ",-1)])]),_:1}),c(a(S),{variant:"ghost",block:"",class:"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:Z},{default:m(()=>[...t[21]||(t[21]=[N(" ğŸ—‘ï¸ Reset Semua Data ",-1)])]),_:1}),t[22]||(t[22]=e("p",{class:"text-center text-xs text-secondary-400 mt-2"}," Hati-hati, aksi ini tidak bisa dibatalkan. ",-1))])])]))}});export{Qe as default};
