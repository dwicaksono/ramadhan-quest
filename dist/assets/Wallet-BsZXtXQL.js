import{l as F,m as w,c as y,d as H,a as k,b as t,h as B,f as D,e as M,g as _,u as n,F as I,r as N,o as g,w as V,p as O,i as P,n as A,t as p}from"./index-DrTH09fo.js";import{_ as S,a as L}from"./BaseButton.vue_vue_type_script_setup_true_lang-9jBKmK0M.js";import{_ as $}from"./BaseProgress.vue_vue_type_script_setup_true_lang-DagzsPbz.js";const W=[{id:"food",category:"Makanan & Minuman",icon:"ðŸ½ï¸"},{id:"transport",category:"Transportasi",icon:"ðŸš—"},{id:"gift",category:"Hadiah / Bingkisan",icon:"ðŸŽ"},{id:"clothes",category:"Pakaian",icon:"ðŸ‘”"},{id:"donation",category:"Sedekah / Zakat",icon:"ðŸ¤²"},{id:"savings",category:"Tabungan",icon:"ðŸ’°"}],j="ramadan-quest-wallet";function C(){return W.map(a=>({...a,amount:0,isCompleted:!1}))}function z(){const a=localStorage.getItem(j);if(a)try{return JSON.parse(a)}catch{return{totalBudget:0,allocations:C()}}return{totalBudget:0,allocations:C()}}const G=F("wallet",()=>{const a=z(),s=w(a.totalBudget),l=w(a.allocations),c=y(()=>l.value.reduce((i,u)=>i+u.amount,0)),m=y(()=>s.value-c.value),d=y(()=>s.value>0?Math.round(c.value/s.value*100):0);function e(){const i={totalBudget:s.value,allocations:l.value};localStorage.setItem(j,JSON.stringify(i))}function x(i){s.value=i,e()}function o(i,u){const f=l.value.find(b=>b.id===i);f&&(f.amount=u,e())}function r(i){const u=l.value.find(f=>f.id===i);u&&(u.isCompleted=!u.isCompleted,e())}function R(i){const u=[1e5,5e4,2e4,1e4,5e3,2e3,1e3,500,200,100],f={1e5:"Rp 100.000",5e4:"Rp 50.000",2e4:"Rp 20.000",1e4:"Rp 10.000",5e3:"Rp 5.000",2e3:"Rp 2.000",1e3:"Rp 1.000",500:"Rp 500",200:"Rp 200",100:"Rp 100"},b=[];let T=i;for(const v of u){const h=Math.floor(T/v);h>0&&(b.push({value:v,count:h,label:f[v]}),T-=h*v)}return b}function E(){s.value=0,l.value=C(),e()}return{totalBudget:s,allocations:l,totalAllocated:c,remainingBudget:m,allocationProgress:d,setTotalBudget:x,updateAllocation:o,toggleCompleted:r,getDenominations:R,reset:E}});function J(){const a=G();function s(e){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function l(e){return{food:Math.round(e*.3),transport:Math.round(e*.1),gift:Math.round(e*.2),clothes:Math.round(e*.15),donation:Math.round(e*.1),savings:Math.round(e*.15)}}function c(e){const x=l(e);a.setTotalBudget(e),Object.entries(x).forEach(([o,r])=>{a.updateAllocation(o,r)})}const m=y(()=>a.getDenominations(a.remainingBudget)),d=y(()=>{const e=a.allocationProgress;return e<50?{status:"low",label:"Baru mulai",color:"text-secondary-500"}:e<80?{status:"mid",label:"Hampir selesai",color:"text-accent-500"}:e<100?{status:"high",label:"Hampir penuh",color:"text-primary-500"}:{status:"full",label:"Selesai!",color:"text-primary-600"}});return{walletStore:a,formatCurrency:s,getSuggestedAllocations:l,applySuggested:c,denominationBreakdown:m,budgetHealth:d}}const K={class:"min-h-screen pb-24 px-4 py-6 space-y-6"},U={class:"flex gap-2"},q={class:"flex items-center justify-between mb-3"},Y={class:"flex justify-between mt-3 text-sm"},Z={class:"font-semibold"},Q={class:"flex justify-between mt-1 text-sm"},X={class:"font-semibold text-primary-600"},tt={key:1,class:"space-y-3"},et={class:"flex items-center gap-3"},ot={class:"text-2xl"},st={class:"font-medium text-secondary-900"},nt={class:"text-sm text-secondary-500"},at=["onClick"],ut=H({__name:"Wallet",setup(a){const{walletStore:s,formatCurrency:l,applySuggested:c,budgetHealth:m}=J(),d=w(s.totalBudget||5e5);function e(){c(d.value)}return(x,o)=>(g(),k("div",K,[o[8]||(o[8]=t("div",null,[t("h1",{class:"text-2xl font-bold text-secondary-900"},"Dompet ðŸ’°"),t("p",{class:"text-sm text-secondary-500"},"Kelola budget THR kamu")],-1)),B(n(S),null,{default:_(()=>[o[2]||(o[2]=t("label",{class:"block text-sm font-medium text-secondary-700 mb-2"}," Total Budget THR ",-1)),t("div",U,[V(t("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>d.value=r),type:"number",class:"flex-1 px-4 py-3 border border-secondary-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"500000"},null,512),[[O,d.value,void 0,{number:!0}]]),B(n(L),{onClick:e},{default:_(()=>[...o[1]||(o[1]=[P(" Set ",-1)])]),_:1})])]),_:1}),n(s).totalBudget>0?(g(),D(n(S),{key:0},{default:_(()=>[t("div",q,[o[3]||(o[3]=t("span",{class:"font-semibold text-secondary-900"},"Progress Alokasi",-1)),t("span",{class:A(n(m).color)},p(n(m).label),3)]),B(n($),{value:n(s).allocationProgress,variant:"primary",size:"lg","show-label":""},null,8,["value"]),t("div",Y,[o[4]||(o[4]=t("span",{class:"text-secondary-500"},"Dialokasikan",-1)),t("span",Z,p(n(l)(n(s).totalAllocated)),1)]),t("div",Q,[o[5]||(o[5]=t("span",{class:"text-secondary-500"},"Sisa",-1)),t("span",X,p(n(l)(n(s).remainingBudget)),1)])]),_:1})):M("",!0),n(s).totalBudget>0?(g(),k("div",tt,[o[7]||(o[7]=t("h3",{class:"font-semibold text-secondary-900"},"Alokasi Budget",-1)),(g(!0),k(I,null,N(n(s).allocations,r=>(g(),D(n(S),{key:r.id,class:"flex items-center justify-between"},{default:_(()=>[t("div",et,[t("span",ot,p(r.icon),1),t("div",null,[t("p",st,p(r.category),1),t("p",nt,p(n(l)(r.amount)),1)])]),t("button",{class:A(["w-8 h-8 rounded-full flex items-center justify-center transition-colors",r.isCompleted?"bg-primary-100 text-primary-600":"bg-secondary-100 text-secondary-400"]),onClick:R=>n(s).toggleCompleted(r.id)},[...o[6]||(o[6]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],10,at)]),_:2},1024))),128))])):M("",!0)]))}});export{ut as default};
