import{u as j,c as p,S as B,Q as U,D as m,d as q,s as J,a as ae,b as f,e,h as S,t as i,f as a,j as g,F as G,A as V,g as h,_ as N,o as k,r as D,q as se,U as ne,i as c,I as M,J as $,B as w,k as re,V as oe,W as ie}from"./index-DS11LCJM.js";import{_ as le}from"./BaseProgress.vue_vue_type_script_setup_true_lang-Bk6vzb1n.js";function de(){const x=j(),s=p(()=>x.state.level),r=p(()=>x.state.xp),l=p(()=>B[s.value]||0),y=p(()=>B[s.value+1]||1/0),u=p(()=>Math.max(0,y.value-r.value)),n=p(()=>r.value-l.value),o=p(()=>y.value-l.value),_=p(()=>o.value===1/0?100:Math.min(n.value/o.value*100,100)),I=p(()=>!(s.value+1 in B)),C=p(()=>{const b=s.value;return b>=30?"Wali Tercinta":b>=25?"Mujahid Ramadhan":b>=20?"Sahabat Puasa":b>=15?"Penghafal Doa":b>=10?"Santri Rajin":b>=5?"Pemula Berbinar":"Petualang Baru"});return{level:s,xp:r,currentLevelThreshold:l,nextLevelThreshold:y,xpToNextLevel:u,xpInCurrentLevel:n,xpForCurrentLevelBand:o,progressPercent:_,isMaxLevel:I,levelTitle:C}}const A=[{id:"first_step",name:"Langkah Pertama",description:"Login pertama kali di Ramadhan Quest",icon:"ğŸš€"},{id:"hydration_master",name:"Hydration Master",description:"Minum 8 gelas air dalam satu malam (2-4-2)",icon:"ğŸ’§"},{id:"early_bird",name:"Pejuang Sahur",description:"Log aktivitas pada waktu Sahur (03:00 - 04:30)",icon:"ğŸ•‹"},{id:"night_owl",name:"Ahli Ibadah Malam",description:"Log Tarawih atau Tadarus di malam hari",icon:"ğŸŒ™"},{id:"sedekah_warrior",name:"Dermawan",description:"Melakukan Sedekah 5 kali",icon:"ğŸ¤"},{id:"streak_master",name:"Istiqomah",description:"Mencapai 7 hari streak berturut-turut",icon:"ğŸ”¥"}],ce="ramadan-quest-badges";function ue(){const x=j(),s=U(ce,{}),r=p(()=>A.map(n=>({...n,unlockedAt:s.value[n.id]||void 0,isUnlocked:!!s.value[n.id]}))),l=p(()=>Object.keys(s.value).length);function y(){const n=x.state,o=[];return s.value.first_step||(u("first_step"),o.push("first_step")),!s.value.hydration_master&&n.waterLog>=8&&(u("hydration_master"),o.push("hydration_master")),!s.value.sedekah_warrior&&n.sadaqahTotal>=5e4&&(u("sedekah_warrior"),o.push("sedekah_warrior")),!s.value.streak_master&&n.streak>=7&&(u("streak_master"),o.push("streak_master")),o}function u(n){if(s.value[n])return;const o=A.find(_=>_.id===n);o&&(s.value[n]=new Date().toISOString(),m.success(`Badge Unlocked: ${o.name}! ${o.icon}`,{duration:5e3,description:o.description}),x.addXP(100))}return{allBadges:r,unlockedCount:l,checkBadges:y,unlock:u}}const me={class:"mb-4 text-sm text-secondary-500 dark:text-secondary-400"},fe={class:"font-bold text-primary-600 dark:text-primary-400"},pe={class:"grid grid-cols-3 gap-3"},xe={class:"text-3xl mb-2 filter drop-shadow-sm"},ke={class:"space-y-1"},ge={key:0,class:"text-[10px] text-amber-600 dark:text-amber-400 font-medium"},ye={key:1,class:"text-[10px] text-secondary-400 dark:text-secondary-600"},be=q({__name:"TrophyRoom",setup(x){const{allBadges:s,checkBadges:r,unlockedCount:l}=ue();return J(()=>{r()}),(y,u)=>(k(),ae(a(N),{title:"Trophy Room ğŸ†"},{default:f(()=>[e("div",me,[u[0]||(u[0]=S(" Koleksi pencapaianmu selama Ramadhan. ",-1)),e("span",fe,i(a(l))+" / "+i(a(s).length),1)]),e("div",pe,[(k(!0),g(G,null,V(a(s),n=>(k(),g("div",{key:n.id,class:h(["flex flex-col items-center text-center p-3 rounded-xl border transition-all duration-300",[n.isUnlocked?"bg-amber-50 dark:bg-amber-900/10 border-amber-200 dark:border-amber-800":"bg-stone-50 dark:bg-white/5 border-stone-100 dark:border-white/5 grayscale opacity-60"]])},[e("div",xe,i(n.icon),1),e("div",ke,[e("p",{class:h(["text-xs font-bold leading-tight",n.isUnlocked?"text-secondary-900 dark:text-white":"text-secondary-400 dark:text-secondary-500"])},i(n.name),3),n.isUnlocked?(k(),g("p",ge," Tercapai! ")):(k(),g("p",ye," ??? "))])],2))),128))])]),_:1}))}}),v={game:"ramadan-quest-game",wallet:"ramadan-quest-wallet",habits:"ramadan-quest-habits"};function ve(){const x={game:JSON.parse(localStorage.getItem(v.game)||"{}"),wallet:JSON.parse(localStorage.getItem(v.wallet)||"{}"),habits:JSON.parse(localStorage.getItem(v.habits)||"{}"),timestamp:new Date().toISOString(),version:"1.0.0"},s=new Blob([JSON.stringify(x,null,2)],{type:"application/json"}),r=URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download=`ramadan-quest-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)}async function he(x){try{const s=await x.text(),r=JSON.parse(s);if(!r.game||!r.wallet||!r.habits)throw new Error("Invalid backup file format");return localStorage.setItem(v.game,JSON.stringify(r.game)),localStorage.setItem(v.wallet,JSON.stringify(r.wallet)),localStorage.setItem(v.habits,JSON.stringify(r.habits)),window.location.reload(),!0}catch(s){return console.error("Import failed:",s),!1}}function _e(){localStorage.removeItem(v.game),localStorage.removeItem(v.wallet),localStorage.removeItem(v.habits),window.location.reload()}const we={class:"min-h-screen pb-24 px-4 py-6 space-y-6"},Se={class:"text-center"},Ne={class:"text-2xl font-bold text-secondary-900 dark:text-white"},Le={class:"text-sm text-primary-600 dark:text-primary-400 font-medium"},Ie={class:"text-xs text-secondary-500 dark:text-secondary-400"},Pe={class:"space-y-4"},Ce={class:"flex justify-between text-sm mb-1"},Te={class:"font-medium dark:text-white"},Ee={class:"text-xs text-secondary-400 dark:text-secondary-500 mt-1 text-right"},Be={class:"grid grid-cols-3 gap-4 text-center pt-2 border-t border-secondary-100 dark:border-secondary-700"},De={class:"text-2xl font-bold text-primary-600 dark:text-primary-400"},Me={class:"text-2xl font-bold text-accent-600 dark:text-accent-400"},je={class:"text-2xl font-bold text-secondary-600 dark:text-secondary-300"},Re={class:"flex gap-2"},Oe={class:"space-y-4"},$e={class:"flex items-center justify-between"},Ae={class:"flex items-center justify-between"},Ue={class:"space-y-4"},qe={class:"flex gap-2 mb-2"},Je={key:0},Ge={key:1},Ve={class:"text-xs text-secondary-500 dark:text-secondary-400"},He=["value"],ze={key:0,class:"flex items-center justify-between pt-2"},Fe={class:"space-y-6"},Ke={class:"space-y-3"},Xe={class:"grid grid-cols-2 gap-3"},We={class:"relative"},Ye={class:"pt-4 border-t border-secondary-200 dark:border-secondary-700"},tt=q({__name:"Profile",setup(x){const s=j(),{level:r,xp:l,xpToNextLevel:y,progressPercent:u,levelTitle:n}=de(),o=D(s.state.userName),_=D(null),{locationName:I,detectLocation:C,isLoading:b,availableMethods:H,selectedMethodId:T}=se(),{notificationPermission:z,notificationEnabled:L,requestPermission:F,isSupported:K}=ne(),R=U("rq-user-coords",{lat:0,lng:0}),E=D(I.value);async function X(){z.value!=="granted"?await F()?m.success("Notifikasi Adzan diaktifkan! ğŸ””"):m.error("Izin notifikasi ditolak"):(L.value=!L.value,L.value?m.success("Notifikasi Adzan diaktifkan"):m.info("Notifikasi Adzan dinonaktifkan"))}function W(){I.value=E.value,m.success("Nama lokasi diperbarui")}function Y(){m.success("Metode perhitungan diperbarui")}function Q(){s.setUserName(o.value),m.success("Nama berhasil disimpan!")}J(()=>{});function Z(){try{ve(),m.success("Backup data berhasil didownload")}catch{m.error("Gagal membuat backup")}}async function ee(P){var O;const t=P.target;if(!((O=t.files)!=null&&O.length))return;const d=t.files[0];await he(d)?m.success("Data berhasil dipulihkan!"):m.error("Gagal memulihkan data. File mungkin rusak."),_.value&&(_.value.value="")}function te(){confirm(`âš ï¸ PERINGATAN: Semua progress kamu (XP, Coins, Habit) akan hilang permanen.

Yakin ingin reset?`)&&_e()}return(P,t)=>(k(),g("div",we,[e("div",Se,[t[5]||(t[5]=e("div",{class:"w-24 h-24 bg-primary-100 dark:bg-primary-900/50 rounded-full mx-auto flex items-center justify-center text-5xl mb-4 border-4 border-white dark:border-secondary-800 shadow-sm"}," ğŸ§• ",-1)),e("h1",Ne,i(a(s).state.userName||"Muslim"),1),e("p",Le,i(a(n)),1),e("p",Ie,"Level "+i(a(r)),1)]),c(a(N),null,{default:f(()=>[e("div",Pe,[e("div",null,[e("div",Ce,[t[6]||(t[6]=e("span",{class:"text-secondary-600 dark:text-secondary-400"},"XP Progress",-1)),e("span",Te,i(a(l))+" / "+i(a(l)+a(y))+" XP",1)]),c(a(le),{value:a(u),variant:"primary"},null,8,["value"]),e("p",Ee,i(a(y))+" XP to Level "+i(a(r)+1),1)]),e("div",Be,[e("div",null,[e("p",De,i(a(s).state.streak),1),t[7]||(t[7]=e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Streak",-1))]),e("div",null,[e("p",Me,i(a(s).state.coins),1),t[8]||(t[8]=e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Coins",-1))]),e("div",null,[e("p",je,i(a(s).state.energy)+"%",1),t[9]||(t[9]=e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Energy",-1))])])])]),_:1}),c(be),c(a(N),null,{default:f(()=>[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Nama Kamu ",-1)),e("div",Re,[M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=d=>o.value=d),type:"text",class:"flex-1 px-4 py-3 border border-secondary-200 dark:border-secondary-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white placeholder-secondary-400 dark:placeholder-secondary-500",placeholder:"Masukkan nama"},null,512),[[$,o.value]]),c(a(w),{onClick:Q},{default:f(()=>[...t[10]||(t[10]=[S(" Simpan ",-1)])]),_:1})])]),_:1}),c(a(N),{title:"Pengaturan Aplikasi"},{default:f(()=>[e("div",Oe,[e("div",$e,[t[12]||(t[12]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400"}," ğŸ”Š "),e("div",null,[e("p",{class:"text-sm font-medium text-secondary-900 dark:text-white"},"Efek Suara"),e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Audio game dan efek")])],-1)),e("button",{onClick:t[1]||(t[1]=d=>a(s).toggleSound(!a(s).state.settings.soundEnabled)),class:h(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-secondary-800",a(s).state.settings.soundEnabled?"bg-primary-600":"bg-gray-200 dark:bg-secondary-700"])},[e("span",{class:h(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",a(s).state.settings.soundEnabled?"translate-x-6":"translate-x-1"])},null,2)],2)]),e("div",Ae,[t[13]||(t[13]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-orange-50 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-400"}," ğŸ“³ "),e("div",null,[e("p",{class:"text-sm font-medium text-secondary-900 dark:text-white"},"Getaran"),e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Haptic feedback")])],-1)),e("button",{onClick:t[2]||(t[2]=d=>a(s).toggleHaptics(!a(s).state.settings.hapticsEnabled)),class:h(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-secondary-800",a(s).state.settings.hapticsEnabled?"bg-primary-600":"bg-gray-200 dark:bg-secondary-700"])},[e("span",{class:h(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",a(s).state.settings.hapticsEnabled?"translate-x-6":"translate-x-1"])},null,2)],2)])])]),_:1}),c(a(N),{title:"Waktu Sholat & Notifikasi"},{default:f(()=>[e("div",Ue,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Lokasi ",-1)),e("div",qe,[M(e("input",{"onUpdate:modelValue":t[3]||(t[3]=d=>E.value=d),type:"text",class:"flex-1 px-4 py-3 border border-secondary-200 dark:border-secondary-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white",placeholder:"Nama Kota (cth: Jakarta)",onChange:W},null,544),[[$,E.value]]),c(a(w),{onClick:a(C),disabled:a(b)},{default:f(()=>[a(b)?(k(),g("span",Je,"...")):(k(),g("span",Ge,"ğŸ“ GPS"))]),_:1},8,["onClick","disabled"])]),e("p",Ve," Koordinat: "+i(a(R).lat.toFixed(4))+", "+i(a(R).lng.toFixed(4)),1)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-secondary-700 dark:text-secondary-300 mb-2"}," Metode Perhitungan ",-1)),M(e("select",{"onUpdate:modelValue":t[4]||(t[4]=d=>ie(T)?T.value=d:null),onChange:Y,class:"w-full px-4 py-3 border border-secondary-200 dark:border-secondary-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 bg-white dark:bg-secondary-900 text-secondary-900 dark:text-white appearance-none"},[(k(!0),g(G,null,V(a(H),d=>(k(),g("option",{key:d.id,value:d.id},i(d.name),9,He))),128))],544),[[oe,a(T)]])]),a(K)?(k(),g("div",ze,[t[16]||(t[16]=e("div",{class:"flex items-center gap-3"},[e("div",{class:"w-8 h-8 rounded-full bg-primary-50 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400"}," ğŸ”” "),e("div",null,[e("p",{class:"text-sm font-medium text-secondary-900 dark:text-white"},"Notifikasi Adzan"),e("p",{class:"text-xs text-secondary-500 dark:text-secondary-400"},"Pengingat waktu sholat")])],-1)),e("button",{onClick:X,class:h(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-secondary-800",a(L)?"bg-primary-600":"bg-gray-200 dark:bg-secondary-700"])},[e("span",{class:h(["inline-block h-4 w-4 transform rounded-full bg-white transition-transform",a(L)?"translate-x-6":"translate-x-1"])},null,2)],2)])):re("",!0)])]),_:1}),e("div",Fe,[c(a(N),{title:"Pengaturan Data"},{default:f(()=>[e("div",Ke,[t[19]||(t[19]=e("p",{class:"text-sm text-secondary-500 dark:text-secondary-400 mb-4"}," Simpan progress kamu agar aman, atau pindahkan ke perangkat lain. ",-1)),e("div",Xe,[c(a(w),{variant:"outline",onClick:Z,class:"dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-700"},{default:f(()=>[...t[17]||(t[17]=[S(" ğŸ“¤ Backup Data ",-1)])]),_:1}),e("div",We,[e("input",{type:"file",ref_key:"fileInput",ref:_,accept:".json",class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onChange:ee},null,544),c(a(w),{variant:"outline",class:"w-full dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-700"},{default:f(()=>[...t[18]||(t[18]=[S(" ğŸ“¥ Restore Data ",-1)])]),_:1})])])])]),_:1}),e("div",Ye,[c(a(w),{variant:"outline",block:"",class:"mb-3 dark:border-secondary-600 dark:text-secondary-200 dark:hover:bg-secondary-700"},{default:f(()=>[...t[20]||(t[20]=[S(" ğŸ’ Traktir Developer ",-1)])]),_:1}),c(a(w),{variant:"ghost",block:"",class:"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20",onClick:te},{default:f(()=>[...t[21]||(t[21]=[S(" ğŸ—‘ï¸ Reset Semua Data ",-1)])]),_:1}),t[22]||(t[22]=e("p",{class:"text-center text-xs text-secondary-400 mt-2"}," Hati-hati, aksi ini tidak bisa dibatalkan. ",-1))])])]))}});export{tt as default};
